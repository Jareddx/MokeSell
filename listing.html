<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="MokeSell - Buy, Sell & Discover.">
    <title>Listing Details</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Listing Details</h1>
    </header>

    <main>
        <div id="listing-details">
            <p>Loading listing details...</p>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 MokeSell</p>
    </footer>

    <script>
        // Get the listingid from the URL query parameters
        const urlParams = new URLSearchParams(window.location.search);
        const listingid = urlParams.get('listingid');  // Correct key: 'listingid'

        if (!listingid) {
            document.getElementById('listing-details').innerHTML = "<p>Error: Listing ID not provided!</p>";
        } else {
            // Fetch listing details from API based on listingid
            fetch(`https://mokesell-8e7e.restdb.io/rest/listings?q={"listingid":${listingid}}`, {
                method: "GET",
                headers: {
                    "Content-Type": "application/json",
                    "x-apikey": "67a59a029c97970a4c1b2a74",  // Make sure to replace with your API key
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.length > 0) {
                    const listing = data[0];  // Assuming the data returns an array of listings

                    // Show listing details
                    document.getElementById('listing-details').innerHTML = `
                        <h2>${listing.title}</h2>
                        <img src="${listing.image}" alt="${listing.title}" class="listing-image">
                        <p>${listing.description}</p>
                        <p><strong>Price: $${listing.price}</strong></p>
                    `;
                } else {
                    document.getElementById('listing-details').innerHTML = "<p>Listing not found.</p>";
                }
            })
            .catch(error => {
                console.error('Error loading listing:', error);
                document.getElementById('listing-details').innerHTML = "<p>Error loading listing details. Please try again later.</p>";
            });
        }
    </script>
</body>
</html>
