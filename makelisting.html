<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Make Listing</title>
    <link rel="stylesheet" href="makelisting.css">
    
</head>
<header>
    <div class="top-header">
        <div class="logo">
            <a href="index.html" style="text-decoration: none; color: inherit;">MokeSell</a>
        </div>
        <nav>
            <ul class="nav-links">
                <li><a href="#">Electronics</a></li>
                <li><a href="#">Fashion</a></li>
                <li><a href="#">Services</a></li>
                <li><a href="#">Games</a></li>
                <li><a href="#">Luxury</a></li>
            </ul>
        </nav>
        <div class="nav-icons">
            <a href="appfeedback.html">
                <div class="icon" aria-label="Reviews">R</div>
            </a>
            <a href="buybump.html">
                <div class="icon" aria-label="Buy Bumps">B</div>
            </a>
            <button class="icon" aria-label="Cart" onclick="window.location.href='cart.html'">üõí</button>
            <button class="icon" aria-label="Profile" onclick="window.location.href='signup.html'">üë§</button>
            <button class="sell-btn">Sell Now</button>
        </div>
    </div>

    <div class="bottom-header">
        <div class="search-bar">
            <input type="text" placeholder="Search for an item..." aria-label="Search">
        </div>
        <button class="search-btn">Search</button>
    </div>
</header>
<body>
    <div class="container">
        <div class="listing-container">
            <h1>Make Listing</h1>

            <!-- Image Upload -->
            <div class="form-group">
                <label for="image">Select Image</label>
                <input type="file" id="image" name="image" accept="image/*">
            </div>

            <!-- Condition Selection -->
            <div class="form-group">
                <label>Condition</label>
                <div class="radio-group">
                    <label><input type="radio" name="condition" value="brand-new"> Brand New</label>
                    <label><input type="radio" name="condition" value="new"> New</label>
                    <label><input type="radio" name="condition" value="used"> Used</label>
                    <label><input type="radio" name="condition" value="heavily-used"> Heavily Used</label>
                </div>
            </div>

            <!-- Category Dropdown -->
            <div class="form-group">
                <label for="category">Category</label>
                <select id="category" name="category">
                    <option value="">Select a category</option>
                    <option value="electronics">Electronics</option>
                    <option value="fashion">Fashion</option>
                    <option value="home">Home</option>
                    <option value="sports">Sports</option>
                    <option value="other">Other</option>
                </select>
            </div>

            <!-- Listing Name -->
            <div class="form-group">
                <label for="listing-name">Listing Name</label>
                <input type="text" id="listing-name" name="listing-name" placeholder="Enter listing name">
            </div>

            <!-- Brand -->
            <div class="form-group">
                <label for="brand">Brand</label>
                <input type="text" id="brand" name="brand" placeholder="Enter brand">
            </div>

            <!-- Description -->
            <div class="form-group">
                <label for="description">Description of Item</label>
                <textarea id="description" name="description" placeholder="Enter description"></textarea>
            </div>

            <!-- Price Section -->
            <div class="form-group">
                <label>Price</label>
                <div class="price-group">
                    <label><input type="radio" name="price-type" value="free"> Free</label>
                    <label><input type="radio" name="price-type" value="price"> Price</label>
                    <input type="number" id="price" name="price" placeholder="Enter price" disabled>
                </div>
            </div>

            <!-- Meetup Place -->
            <div class="form-group">
                <label for="meetup">Choose Meetup Place</label>
                <input type="text" id="meetup" name="meetup" placeholder="Enter meetup place">
            </div>

            <!-- Save & Publish Button -->
            <button class="submit-button">Save & Publish</button>
        </div>
    </div>
    <footer class="mokesell-footer">
        <div class="footer-container">
            <div class="footer-section company-info">
                <h3>MokeSell</h3>
                <p>Buy & Sell with confidence on MokeSell. The best marketplace for everything you need.</p>
                <p>&copy; 2025 MokeSell. All rights reserved.</p>
            </div>
    
            <div class="footer-section support">
                <h4>Customer Support</h4>
                <ul>
                    <li><a href="#">Help Center</a></li>
                    <li><a href="#">FAQs</a></li>
                    <li><a href="#">Return Policy</a></li>
                    <li><a href="#">Terms & Conditions</a></li>
                </ul>
            </div>
    
            <div class="footer-section social-media">
                <h4>Follow Us</h4>
                <div class="social-icons">
                    <a href="#"><img src="Photos/facebook-icon.png" alt="Facebook"></a>
                    <a href="#"><img src="Photos/twitter-icon.png" alt="Twitter"></a>
                    <a href="#"><img src="Photos/instagram-icon.png" alt="Instagram"></a>
                </div>
            </div>
    
            <div class="footer-section app-promotion">
                <h4>Get the App</h4>
                <div class="app-buttons">
                    <img src="Photos/google-play.png" alt="Google Play">
                    <img src="Photos/app-store.png" alt="App Store">
                </div>
            </div>
        </div>
    </footer>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const priceInput = document.getElementById("price");
            const priceRadio = document.querySelector("input[name='price-type'][value='price']");
            const freeRadio = document.querySelector("input[name='price-type'][value='free']");
        
            // Disable price input initially
            priceInput.disabled = true;
        
            // Enable/disable price input based on selection
            document.querySelectorAll("input[name='price-type']").forEach(radio => {
                radio.addEventListener("change", function () {
                    if (priceRadio.checked) {
                        priceInput.disabled = false;
                        priceInput.focus();
                    } else {
                        priceInput.disabled = true;
                        priceInput.value = ""; // Reset if "Free" is selected
                    }
                });
            });
        
            // Form submission logic
            document.querySelector(".submit-button").addEventListener("click", function(event) {
                event.preventDefault();  // Prevent page reload
        
                const formData = {
                    title: document.getElementById("listing-name").value.trim(),
                    description: document.getElementById("description").value.trim(),
                    price: priceRadio.checked ? parseFloat(priceInput.value) || 0 : 0,
                    category: document.getElementById("category").value,
                    meetup: document.getElementById("meetup").value.trim(),
                };
        
                console.log("Submitting Data:", formData); // Debugging log
        
                // API request
                fetch("https://mokesell-8e7e.restdb.io/rest/listings", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "x-apikey": "67a59a029c97970a4c1b2a74"
                    },
                    body: JSON.stringify(formData),
                })
                .then(response => {
                    console.log("Response Status:", response.status);
                    if (!response.ok) {
                        throw new Error("Server response wasn't OK");
                    }
                    return response.json();
                })
                .then(data => {
                    console.log("API Response Data:", data);
                    alert("‚úÖ Listing created successfully!");
                    window.location.href = "listings.html"; // Redirect to listings page
                })
                .catch(error => {
                    console.error("Fetch Error:", error);
                    alert("‚ùå Error creating listing. Check console for details.");
                });
            });
        });
        </script>
        
    
</body>
</html>